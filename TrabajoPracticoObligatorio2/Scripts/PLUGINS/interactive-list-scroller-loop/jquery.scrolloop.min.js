﻿(function(b){var a={init:function(c){return this.each(function(){var h=b(this),f,j=0,e,k,d=h.children("li"),g=h.data("scrolloop");if(!g){h.data("scrolloop",{img:d,pos:[d.length],d:0,interval:null,timeout:null,stopping:false,multiplier:c||7});g=h.data("scrolloop")}h.css({overflow:"hidden",position:"relative"}).show();d.each(function(){b(this).css({position:"absolute",top:"50%","margin-top":"-"+(b(this).height()/2)+"px"})});for(e=0;e<d.length;e+=1){f=0;if(b(d[k]).outerHeight()>j){j=b(d[k]).outerHeight()}for(k=0;k<e;k+=1){f+=b(d[k]).outerWidth(true)}g.pos[e]=f;b(d[e]).css({left:f})}h.height(j).hide();h.mousemove(function(i){a.move.apply(this,[i])}).mouseenter(function(i){a.startscroll.apply(this,[i])}).mouseleave(function(i){a.endscroll.apply(this,[i])})})},scroll:function(){var f=b(this).data("scrolloop"),c,h,d,e=-f.d,g=function(k){var j=b(f.img[k]);if(f.pos[k]<-j.outerWidth()||f.pos[k]>b(this).outerWidth()+j.outerWidth()){j.hide()}else{j.show()}};e*=f.multiplier;if(f.stopping){f.d/=1.1}if(e<0){for(c=0;c<f.img.length;c+=1){f.pos[c]+=e;if(f.pos[c]<=-b(f.img[c]).outerWidth()){d=0;for(h=0;h<f.img.length;h+=1){if(h!==c){d+=b(f.img[h]).outerWidth()}}f.pos[c]=d+f.pos[c]+b(f.img[c]).outerWidth()}b(f.img[c]).css("left",f.pos[c]);g(c)}}else{for(c=f.img.length-1;c>-1;c-=1){f.pos[c]+=e;if(f.pos[c]>=b(this).outerWidth()){d=0;for(h=0;h<f.img.length;h+=1){d+=b(f.img[h]).outerWidth()}f.pos[c]-=d}b(f.img[c]).css("left",f.pos[c]);g(c)}}return b(this)},move:function(g){var f=b(this),c,d=f.data("scrolloop");c=f.outerWidth();d.d=(g.pageX-(f.offset().left+c/2))*2/c},startscroll:function(f){var d=b(this),c=d.data("scrolloop");if(c.interval!==null){clearInterval(c.interval);c.interval=null;clearTimeout(c.timeout);c.timeout=null}c.stopping=false;c.fevent=f;c.interval=setInterval(function(){a.scroll.apply(d)},50)},endscroll:function(){var d=b(this),c=d.data("scrolloop");c.stopping=true;c.timeout=setTimeout(function(){if(c.interval!==null){clearInterval(c.interval);c.interval=null}c.stopping=false},500)}};b.fn.scrolloop=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof c==="number"||!c){return a.init.apply(this,arguments)}b.error("Method "+c+" does not exist on jQuery.scrolloop")}}(jQuery));
